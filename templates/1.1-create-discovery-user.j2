{#
================================================================================
Template: Discovery User setCredential Payload
================================================================================
Purpose:
  Generate JSON payload for the NDFC lan-discovery setCredential API to
  configure NDFC switch discovery credentials in bulk.

API Endpoint:
  POST /appcenter/cisco/ndfc/api/v1/lan-discovery/setCredential

Input Variables:
  setcredential_switches     - List of dicts: {ipAddress, model, serialNumber, sysName}
  seed_ips                   - Comma-separated string of switch management IPs
  discovery_username         - Username for NDFC switch discovery
  discovery_password         - Password for NDFC switch discovery

Notes:
  - Single call sets credentials for all switches at once
  - Credentials should be stored in Ansible vault for security
================================================================================
#}
{
  "enablePwd": "",
  "groupId": 0,
  "maxHop": 0,
  "platform": "",
  "seed": "{{ seed_ips }}",
  "switches": [
{% for sw in setcredential_switches %}
    {
      "globalDevId": "",
      "ipAddress": "{{ sw.ipAddress }}",
      "model": "{{ sw.model }}",
      "serialNumber": "{{ sw.serialNumber }}",
      "sysName": "{{ sw.sysName }}",
      "vdcMac": ""
    }{% if not loop.last %},{% endif %}

{% endfor %}
  ],
  "timeout": 0,
  "userCredential": {
    "username": "{{ discovery_username }}",
    "v2Community": "",
    "v3": true,
    "v3Password": "{{ discovery_password }}",
    "v3Protocol": "MD5"
  }
}
